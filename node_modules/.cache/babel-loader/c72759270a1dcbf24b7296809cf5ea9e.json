{"ast":null,"code":"/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends, __values } from \"tslib\";\nimport { BaseDataSource } from \"./BaseDataSource\";\nimport { IPageCandidatesSink_$type } from \"./IPageCandidatesSink\";\nimport { PagePredictionEngine } from \"./PagePredictionEngine\";\nimport { LRUCache$2 } from \"./LRUCache$2\";\nimport { Base, runOn, Array_$type, Number_$type, typeCast, fromEnum, typeGetValue, String_$type, Boolean_$type, markType } from \"./type\";\nimport { IDataSourcePage_$type } from \"./IDataSourcePage\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { SectionMap } from \"./SectionMap\";\nimport { DataSourceExecutionContext } from \"./DataSourceExecutionContext\";\nimport { SectionData } from \"./SectionData\";\nimport { List$1 } from \"./List$1\";\nimport { DataSourceSpecialRow } from \"./DataSourceSpecialRow\";\nimport { DataSourcePropertiesComparer } from \"./DataSourcePropertiesComparer\";\nimport { TransactionState } from \"./TransactionState\";\nimport { TransactionType } from \"./TransactionType\";\nimport { DataSourceBatchStartedEventArgs } from \"./DataSourceBatchStartedEventArgs\";\nimport { DataSourceBatchCompletedEventArgs } from \"./DataSourceBatchCompletedEventArgs\";\nimport { truncate, intDivide } from \"./number\";\n/**\n * @hidden\n */\n\nvar VirtualDataSource =\n/** @class */\n\n/*@__PURE__*/\nfunction (_super) {\n  __extends(VirtualDataSource, _super);\n\n  function VirtualDataSource() {\n    var _this = _super.call(this) || this;\n\n    _this.cz = null;\n    _this.di = false;\n    _this.d5 = 0;\n    _this.dc = null;\n    _this.c3 = null;\n    _this.c2 = null;\n    _this.d4 = 50;\n    _this.d3 = 200;\n    _this.actualPageSizePopulated = false;\n    _this.dp = 50;\n    _this.dg = false;\n    _this.c7 = null;\n    _this.cx = null;\n    _this.cy = null;\n    _this.df = new LRUCache$2(Base.$, IDataSourcePage_$type, 0, 200);\n    _this.dm = new Dictionary$2(Base.$, Array_$type, 0);\n    _this.dn = new Dictionary$2(Number_$type, Number_$type, 0);\n    _this.dh = false;\n    _this.cv = null;\n    _this.c0 = null;\n    _this.de = new SectionMap();\n    _this.cw = null;\n    _this.dx = -1;\n    _this.dq = -1;\n    _this.dz = -1;\n    _this.ds = -1;\n    _this.d0 = -1;\n    _this.dt = -1;\n    _this.dy = -1;\n    _this.dr = -1;\n    _this.d2 = -1;\n    _this.d1 = -1;\n    _this.dv = -1;\n    _this.du = -1;\n    _this.dw = -1;\n    _this.dl = new Dictionary$2(String_$type, Boolean_$type, 0);\n    _this._concurrencyTag = null;\n    _this.batchStarted = null;\n    _this.batchCompleted = null;\n    _this.dc = new PagePredictionEngine();\n    _this.dc.e = _this;\n    _this.dc.ag = _this.actualPageSize;\n    _this.dc.f = _this.de;\n    _this.executionContext = new DataSourceExecutionContext();\n    _this.dc.b = _this.executionContext;\n    _this.isReadOnly = true;\n    return _this;\n  }\n\n  VirtualDataSource.prototype.get_isSectionCollapsable = function () {\n    if (!this.isSectionContentVisible) {\n      return true;\n    }\n\n    return _super.prototype.get_isSectionCollapsable.call(this);\n  };\n\n  VirtualDataSource.prototype.set_isSectionCollapsable = function (a) {\n    _super.prototype.set_isSectionCollapsable.call(this, a);\n  };\n\n  VirtualDataSource.prototype.get_isSectionExpandedDefault = function () {\n    if (!this.isSectionContentVisible) {\n      return false;\n    }\n\n    if (this.isSectionCollapsable) {\n      return _super.prototype.get_isSectionExpandedDefault.call(this);\n    }\n\n    return true;\n  };\n\n  VirtualDataSource.prototype.set_isSectionExpandedDefault = function (a) {\n    _super.prototype.set_isSectionExpandedDefault.call(this, a);\n  };\n\n  VirtualDataSource.prototype.get_actualBaseDataProvider = function () {\n    return this.actualDataProvider;\n  };\n\n  Object.defineProperty(VirtualDataSource.prototype, \"actualBaseDataProvider\", {\n    get: function get() {\n      return this.get_actualBaseDataProvider();\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(VirtualDataSource.prototype, \"dataProvider\", {\n    get: function get() {\n      return this.c3;\n    },\n    set: function set(a) {\n      var b = this.c3;\n      this.c3 = a;\n\n      if (b != this.c3) {\n        this.onPropertyUpdated(\"DataProvider\", b, this.c3);\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(VirtualDataSource.prototype, \"actualDataProvider\", {\n    get: function get() {\n      if (this.c2 == null) {\n        this.actualDataProvider = this.resolveDataProvider();\n      }\n\n      return this.c2;\n    },\n    set: function set(a) {\n      var b = this.c2;\n      this.c2 = a;\n\n      if (b != this.c2) {\n        this.onPropertyUpdated(\"ActualDataProvider\", b, this.c2);\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(VirtualDataSource.prototype, \"pageSizeRequested\", {\n    get: function get() {\n      return this.d4;\n    },\n    set: function set(a) {\n      var b = this.d4;\n      this.d4 = a;\n\n      if (b != this.d4) {\n        this.onPropertyUpdated(\"PageSizeRequested\", b, this.d4);\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  VirtualDataSource.prototype.resetCache = function () {\n    if (this.c8 != null) {\n      this.c8.resetCache();\n    }\n\n    this.resetCacheOverride();\n  };\n\n  VirtualDataSource.prototype.resetCacheOverride = function () {\n    this.df.i();\n  };\n\n  Object.defineProperty(VirtualDataSource.prototype, \"maxCachedPages\", {\n    get: function get() {\n      return this.d3;\n    },\n    set: function set(a) {\n      var b = this.d3;\n      this.d3 = a;\n\n      if (b != this.d3) {\n        this.onPropertyUpdated(\"MaxCachedPages\", b, this.d3);\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(VirtualDataSource.prototype, \"actualPageSize\", {\n    get: function get() {\n      return this.dp;\n    },\n    set: function set(a) {\n      var b = this.dp;\n      this.dp = a;\n\n      if (b != this.dp) {\n        this.onPropertyUpdated(\"ActualPageSize\", b, this.dp);\n      }\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  VirtualDataSource.prototype.get_isSortingSupported = function () {\n    if (this.externalDataSource != null && !this.dg) {\n      this.dg = true;\n      var a = this.externalDataSource.isSortingSupportedOverride;\n      this.dg = false;\n      return a;\n    }\n\n    return false;\n  };\n\n  VirtualDataSource.prototype.get_isFilteringSupported = function () {\n    if (this.externalDataSource != null && !this.dg) {\n      this.dg = true;\n      var a = this.externalDataSource.isFilteringSupportedOverride;\n      this.dg = false;\n      return a;\n    }\n\n    return false;\n  };\n\n  VirtualDataSource.prototype.get_isGroupingSupported = function () {\n    if (this.externalDataSource != null && !this.dg) {\n      this.dg = true;\n      var a = this.externalDataSource.isGroupingSupportedOverride;\n      this.dg = false;\n      return a;\n    }\n\n    return false;\n  };\n\n  Object.defineProperty(VirtualDataSource.prototype, \"c8\", {\n    get: function get() {\n      return this.c7;\n    },\n    set: function set(a) {\n      this.c7 = a;\n      this.actualDataProvider = this.resolveDataProvider();\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  VirtualDataSource.prototype.resolveDataProvider = function () {\n    if (this.c8 == null) {\n      return null;\n    }\n\n    return this.c8.resolveDataProvider();\n  };\n\n  VirtualDataSource.prototype.propertyUpdatedOverride = function (a, b, c) {\n    _super.prototype.propertyUpdatedOverride.call(this, a, b, c);\n\n    switch (a) {\n      case \"DataProvider\":\n        this.actualDataProvider = this.dataProvider;\n        this.queueAutoRefresh();\n        break;\n\n      case \"ExecutionContext\":\n        this.dc.b = this.executionContext;\n        break;\n\n      case \"ActualDataProvider\":\n        this.actualDataProvider.pageSizeRequested = this.pageSizeRequested;\n        this.actualDataProvider.pageLoaded = runOn(this, this.eq);\n        this.actualDataProvider.batchCompleted = runOn(this, this.ep);\n        this.queueAutoRefresh();\n        break;\n\n      case \"PageSizeRequested\":\n        this.actualPageSize = this.pageSizeRequested;\n\n        if (this.actualDataProvider != null) {\n          this.actualDataProvider.pageSizeRequested = this.pageSizeRequested;\n        }\n\n        this.queueAutoRefresh();\n        break;\n\n      case \"ActualPageSize\":\n        this.dc.ag = this.actualPageSize;\n        this.queueAutoRefresh();\n        break;\n\n      case \"FirstVisibleIndexRequested\":\n        this.dc.aa = this.firstVisibleIndexRequested;\n        break;\n\n      case \"LastVisibleIndexRequested\":\n        this.dc.ae = this.lastVisibleIndexRequested;\n        break;\n\n      case \"ActualCount\":\n        if (this.actualDataProvider != null && !this.de.q) {\n          this.dc.ab = this.actualDataProvider.actualCount;\n        } else {\n          this.dc.ab = this.actualCount;\n        }\n\n        this.queueAutoRefresh();\n        break;\n\n      case \"MaxCachedPages\":\n        this.df.h = this.maxCachedPages;\n        break;\n    }\n  };\n\n  VirtualDataSource.prototype.d9 = function (a) {\n    if (this.ap && this.de.q) {\n      var b = this.dd(a);\n\n      if (b == null) {\n        b = this.de.d();\n      }\n\n      return a - b.t;\n    }\n\n    return a;\n  };\n\n  VirtualDataSource.prototype.eq = function (a, b, c) {\n    var _this = this;\n\n    var d = this.executionContext;\n\n    if (d != null) {\n      d.execute(function () {\n        return _this.ew(a, b, c);\n      });\n    } else {\n      this.ew(a, b, c);\n    }\n  };\n\n  VirtualDataSource.prototype.ew = function (a, b, c) {\n    if (a == null) {\n      b = this.resolveFullCount(b);\n\n      if (this.actualCount != b) {\n        this.actualCount = b;\n      }\n\n      return;\n    }\n\n    if (c != this.actualPageSize && !this.actualPageSizePopulated) {\n      this.actualPageSize = c;\n    }\n\n    this.actualPageSizePopulated = true;\n    var d = a.pageIndex();\n    this.er(d);\n    this.df.item(d, a);\n    var e = a.schema();\n\n    if (e != null) {\n      this.actualSchema = e;\n    }\n\n    var f = a.getSummaryInformation();\n\n    if (this.summaryDescriptions.k.count > 0 && this.c0 == null && f != null) {\n      this.c0 = f;\n\n      for (var g = 0; g < this.c0.length; g++) {\n        this.c0[g].summaryIndex = this.d7(this.c0[g]);\n      }\n\n      var h = SectionData.r(this.c0);\n      this.d5 = h.count;\n    }\n\n    var i = a.getGroupInformation();\n\n    if (this.groupDescriptions.k.count > 0 && this.cv == null && i != null) {\n      this.cv = i;\n      this.ev();\n      this.di = false;\n    }\n\n    b = this.resolveFullCount(b);\n\n    if (this.actualCount != b) {\n      this.actualCount = b;\n    }\n\n    this.eu(a);\n  };\n\n  VirtualDataSource.prototype.d7 = function (a) {\n    for (var b = 0; b < this.summaryDescriptions.k.count; b++) {\n      var c = this.summaryDescriptions.k.item(b);\n\n      if (c.propertyName == a.propertyName && c.operand == a.operand) {\n        return b;\n      }\n    }\n\n    return -1;\n  };\n\n  VirtualDataSource.prototype.resolveFullCount = function (a) {\n    if (this.cv != null) {\n      return this.de.u + this.getRootSummaryRowCount();\n    }\n\n    return a + this.getRootSummaryRowCount();\n  };\n\n  VirtualDataSource.prototype.ev = function () {\n    var a = 0;\n    var b = 0;\n    var c = this.shouldEmitSectionHeaders;\n    var d = this.shouldEmitSectionFooters;\n\n    for (var e = 0; e < this.cv.length; e++) {\n      var f = new SectionData();\n      var g = b;\n      var h = this.cv[e].endIndex - this.cv[e].startIndex;\n      f.af = a;\n      f.ae = e;\n      f.d = new Array(this.groupDescriptions.k.count);\n\n      for (var i = 0; i < this.groupDescriptions.k.count; i++) {\n        f.d[i] = 0;\n      }\n\n      f.ad = a + h;\n      f.t = 0;\n      f.e = this.cv[e].groupKeyProperties;\n      f.f = this.cv[e].groupKeyValues;\n      f.h = new Array(0);\n      f.ai(this.sectionHeaderDisplayMode, this.isSectionExpandedDefault);\n      this.eo(f, e == 0);\n\n      if (d) {\n        f.u = f.c.length;\n      }\n\n      var j = 0;\n      f.i = new Array(this.groupDescriptions.k.count);\n\n      if (this.summaryScope == 0 || this.summaryScope == 2) {\n        if (this.cv[e].summaryResults != null) {\n          f.i[this.groupDescriptions.k.count - 1] = this.cv[e].summaryResults;\n\n          if (f.i != null) {\n            for (var k = 0; k < f.i[this.groupDescriptions.k.count - 1].length; k++) {\n              var l = f.i[this.groupDescriptions.k.count - 1][k];\n              l.summaryIndex = this.d7(l);\n              l.groupKey = f.f;\n            }\n\n            j = SectionData.r(f.i[this.groupDescriptions.k.count - 1]).count;\n          }\n        }\n      }\n\n      if (this.includeSummaryRowsInSection && this.shouldEmitSummaryRows) {\n        if (this.isSectionSummaryRowsAtBottom) {\n          f.ag = j;\n        } else {\n          f.ah = j;\n          g += j;\n        }\n\n        b += j;\n        f.ad += j;\n      }\n\n      if (d) {\n        b++;\n      }\n\n      if (c) {\n        var m = 0;\n        f.b = new Array(f.c.length);\n\n        if (f.z > -1) {\n          var n = this.de.t._inner[f.z];\n\n          for (var o = 0; o < n.f.length; o++) {\n            m = o;\n\n            if (!Base.equalsStatic(n.f[o], f.f[o])) {\n              break;\n            }\n          }\n        }\n\n        for (var p = m; p < f.c.length; p++) {\n          b++;\n          g++;\n          f.ad++;\n          var q = this.ei(f, p);\n          f.a[p] = q;\n          f.b[p] = p - m;\n\n          if (this.dl.containsKey(q)) {\n            f.c[p] = this.dl.item(q);\n          } else {\n            f.c[p] = this.isSectionExpandedDefault;\n          }\n\n          if (!f.c[p]) {\n            var r = 0;\n            var s = f.c.length - 1 - p;\n            f.ad -= r;\n            b -= r;\n\n            if (d) {\n              b--;\n              f.u--;\n            }\n\n            p += s;\n          }\n        }\n      }\n\n      f.y = c ? f.v() : 0;\n      f.t = g;\n      this.de.z(f, h + 1);\n\n      if (!f.p) {\n        var t = f.w();\n        f.ad -= f.d[t] + j;\n        b -= f.d[t] + j;\n      }\n\n      a = f.ad + 1;\n      this.de.t.add(f);\n      f.q = this.de.r(f);\n    }\n\n    var u = 0;\n\n    for (var v = 0; v < this.de.t.count; v++) {\n      var w = this.de.t._inner[v];\n\n      if (this.shouldEmitSectionHeaders) {\n        if (!w.q) {\n          var x = w.ad - w.af + 1;\n          this.de.ae(w.ae);\n          this.de.ab(w, -x, -x);\n          v--;\n          u++;\n          continue;\n        }\n      }\n\n      if (w.z > -1) {\n        w.z -= u;\n      }\n    }\n  };\n\n  VirtualDataSource.prototype.eo = function (a, b) {\n    if (b) {\n      this.cx = new Array(this.groupDescriptions.k.count);\n\n      for (var c = 0; c < this.cx.length; c++) {\n        this.cx[c] = a;\n      }\n    }\n\n    if (this.sectionHeaderDisplayMode == 1) {\n      var d = false;\n      var e = a.e.length;\n\n      for (var f = 0; f < e; f++) {\n        if (d) {\n          this.cx[f] = a;\n          continue;\n        }\n\n        var g = false;\n\n        if (this.cx[f].f[f] == null) {\n          g = a.f[f] != null;\n        } else {\n          g = !Base.equalsStatic(this.cx[f].f[f], a.f[f]);\n        }\n\n        if (g) {\n          this.cx[f] = a;\n\n          if (f - 1 > -1) {\n            var h = f - 1;\n\n            while (h >= 0 && this.cx[h].o) {\n              h = h - 1;\n            }\n\n            a.z = this.cx[h].ae;\n          }\n\n          d = true;\n        }\n      }\n    } else {\n      var i = false;\n\n      for (var j = 0; j < a.e.length; j++) {\n        if (this.cx[0].f[j] == null) {\n          if (this.cx[0].f[j] != a.f[j]) {\n            i = true;\n            break;\n          }\n\n          continue;\n        }\n\n        if (!Base.equalsStatic(this.cx[0].f[j], a.f[j])) {\n          i = true;\n          break;\n        }\n      }\n\n      if (i) {\n        this.cx[0] = a;\n      }\n    }\n  };\n\n  VirtualDataSource.prototype.en = function (a) {};\n\n  VirtualDataSource.prototype.eu = function (a) {\n    if (this.updateNotifier != null) {\n      var b = a.pageIndex() * this.actualPageSize;\n\n      if (this.actualDataProvider != null) {\n        if (b > this.actualDataProvider.actualCount) {\n          return;\n        }\n      }\n\n      var c = this.d8(b);\n      var d = this.d8(b + a.count() - 1);\n\n      if (c > 0 && this.getRowType(c - 1) == 1) {\n        c--;\n      }\n\n      if (this.actualCount == 0 && a.count() == 0) {\n        this.onClearItems();\n      } else {\n        this.updateNotifier.rangeActualized(c, d);\n      }\n    }\n  };\n\n  VirtualDataSource.prototype.d8 = function (a) {\n    if (this.ap && this.de.q) {\n      var b = this.de.g(a);\n\n      if (b == null) {\n        b = this.de.d();\n      }\n\n      if (!b.p) {\n        return b.af;\n      }\n\n      return a + b.t;\n    }\n\n    return a;\n  };\n\n  VirtualDataSource.prototype.es = function (a) {\n    a();\n  };\n\n  VirtualDataSource.prototype.get_isVirtual = function () {\n    return true;\n  };\n\n  VirtualDataSource.prototype.isPlaceholderItem = function (a) {\n    var b = this.c1(a);\n    var c = b[0];\n\n    if (!this.df.d(c)) {\n      if (b[1] == -1) {\n        return false;\n      }\n\n      return true;\n    }\n\n    return false;\n  };\n\n  VirtualDataSource.prototype.getItemAtIndex = function (a) {\n    if (a >= this.actualCount - this.getRootSummaryRowCount()) {\n      return this.ed(a);\n    }\n\n    var b = this.c1(a);\n    var c = b[0];\n\n    if (!this.df.d(c)) {\n      if (b[1] == -1) {\n        return this.ed(a);\n      }\n\n      return null;\n    }\n\n    var d = this.df.item(c);\n    var e = b[1];\n\n    if (e == -1) {\n      return this.ed(a);\n    }\n\n    return d.getItemAtIndex(e);\n  };\n\n  VirtualDataSource.prototype.getItemFromKey = function (a) {\n    var b = this.indexOfKey(a);\n\n    if (b >= 0) {\n      return this.getItemAtIndex(b);\n    }\n\n    return null;\n  };\n\n  VirtualDataSource.prototype.ed = function (a) {\n    if (a >= this.actualCount - this.getRootSummaryRowCount()) {\n      var b = new DataSourceSpecialRow();\n      b.rowType = 4;\n      b.level = 0;\n      var c = a - (this.actualCount - this.getRootSummaryRowCount());\n      var d = SectionData.r(this.c0);\n      var e = new Array(d._inner[c].count);\n\n      d._inner[c].values.copyTo(e, 0);\n\n      b.summaryResults = e;\n      return b;\n    }\n\n    var f = this.dd(a);\n\n    if (f != null) {\n      var g = f.j(a);\n\n      if (g == 1 || g == 2) {\n        var h = new DataSourceSpecialRow();\n        h.rowType = g;\n        h.summaryResults = f.i[f.i.length - 1];\n        h.level = g == 1 ? f.w() + (a - f.af) : f.u - 1 - (f.w() + (a - (f.ad - f.u + 1)));\n\n        if (this.sectionHeaderDisplayMode == 0) {\n          for (var i = 0; i < this.groupDescriptions.k.count; i++) {\n            h.setSectionValue(this.groupDescriptions.k.item(i).propertyName, f.f[i]);\n            h.setValue(this.groupDescriptions.k.item(i).propertyName, f.f[i]);\n          }\n        } else {\n          if (h.level >= 0 && h.level < this.groupDescriptions.k.count) {\n            h.setSectionValue(this.groupDescriptions.k.item(h.level).propertyName, f.f[h.level]);\n            h.setValue(this.groupDescriptions.k.item(h.level).propertyName, f.f[h.level]);\n          }\n        }\n\n        return h;\n      } else if (g == 5) {\n        var j = new DataSourceSpecialRow();\n        j.rowType = 5;\n        j.level = f.c.length;\n        var k = f.x(a);\n        var l = SectionData.r(f.i[f.i.length - 1]);\n        var m = new Array(l._inner[k].count);\n\n        l._inner[k].values.copyTo(m, 0);\n\n        j.summaryResults = m;\n        return j;\n      }\n    }\n\n    return null;\n  };\n\n  VirtualDataSource.prototype.c1 = function (a) {\n    if (this.ap && this.de.q) {\n      var b = false;\n      var c = this.dd(a);\n\n      if (c == null) {\n        c = this.de.d();\n\n        if (this.c0.length > 0 && a > c.ad) {\n          b = true;\n        }\n      }\n\n      var d = c.af;\n\n      if (this.shouldEmitSectionHeaders && a >= d && a < d + c.v()) {\n        b = true;\n      }\n\n      if (a - (d + c.v() - 1) <= c.aa + c.ah) {\n        b = true;\n      }\n\n      if (this.shouldEmitSectionFooters) {\n        if (a <= c.ad && a >= c.ad - c.c.length - c.ag) {\n          b = true;\n        }\n      } else if (c.ag > 0) {\n        if (a > c.ad - c.ag && a <= c.ad) {\n          b = true;\n        }\n      }\n\n      var e = a - c.t;\n      var f = truncate(Math.floor(e / this.actualPageSize));\n      var g = e % this.actualPageSize;\n\n      if (b) {\n        g = -1;\n      }\n\n      var h = new Array(2);\n      h[0] = f;\n      h[1] = g;\n      return h;\n    } else {\n      var i = truncate(Math.floor(a / this.actualPageSize));\n      var j = a % this.actualPageSize;\n      var k = new Array(2);\n      k[0] = i;\n      k[1] = j;\n      return k;\n    }\n  };\n\n  VirtualDataSource.prototype.dd = function (a) {\n    return this.de.e(a);\n  };\n\n  VirtualDataSource.prototype.getItemPropertyAtIndex = function (a, b) {\n    if (a > this.actualCount - 1 - this.getRootSummaryRowCount()) {\n      return this.ee(a, b);\n    }\n\n    var c = this.c1(a);\n    var d = c[0];\n\n    if (!this.df.d(d)) {\n      if (c[1] == -1) {\n        return this.ee(a, b);\n      }\n\n      return null;\n    }\n\n    var e = this.df.item(d);\n    var f = c[1];\n\n    if (f == -1) {\n      return this.ee(a, b);\n    }\n\n    if (this.aq()) {\n      var g = e.getItemAtIndex(f);\n      var h = this.an(g, b);\n\n      if (h) {\n        var i = this.a1(g, b);\n        return i;\n      }\n    }\n\n    return e.getItemValueAtIndex(f, b);\n  };\n\n  VirtualDataSource.prototype.ee = function (a, b) {\n    var c = this.ed(a);\n\n    if (typeCast(DataSourceSpecialRow.$, c) !== null) {\n      return c.getValue(b);\n    }\n\n    return null;\n  };\n\n  VirtualDataSource.prototype.et = function (a) {\n    if (!this.dn.containsKey(a)) {\n      this.dn.addItem(a, 1);\n    } else {\n      this.dn.item(a, this.dn.item(a) + 1);\n    }\n  };\n\n  VirtualDataSource.prototype.er = function (a) {\n    if (this.dn.containsKey(a)) {\n      this.dn.item(a, this.dn.item(a) - 1);\n\n      if (this.dn.item(a) <= 0) {\n        this.dn.removeItem(a);\n\n        if (this.actualDataProvider != null) {\n          this.actualDataProvider.removePageRequest(a);\n        }\n      }\n    }\n  };\n\n  VirtualDataSource.prototype.addCandidate = function (a, b) {\n    var c = false;\n\n    if (!this.dm.containsKey(a)) {\n      var d = new List$1(Number_$type, 0);\n      var e = this.transformPage(a);\n\n      for (var f = 0; f < e.length; f++) {\n        var g = e[f];\n\n        if (!this.df.d(g)) {\n          d.add(g);\n          this.et(g);\n          var h = this.dn.item(g);\n\n          if (h == 1 && this.actualDataProvider != null) {\n            this.actualDataProvider.addPageRequest(g, b);\n          }\n\n          c = true;\n        }\n      }\n\n      if (d.count > 0) {\n        this.dm.addItem(a, d.toArray());\n      }\n    }\n\n    return c;\n  };\n\n  VirtualDataSource.prototype.removeCandidate = function (a) {\n    if (this.dm.containsKey(a)) {\n      for (var b = 0; b < this.dm.item(a).length; b++) {\n        var c = this.dm.item(a)[b];\n        this.er(c);\n      }\n\n      this.dm.removeItem(a);\n    }\n  };\n\n  VirtualDataSource.prototype.transformPage = function (a) {\n    var b = [a];\n\n    if (this.ap && this.de.q) {\n      var c = a * this.actualPageSize;\n      var d = c + this.actualPageSize - 1;\n      var e = this.dd(c);\n      var f = new List$1(Number_$type, 0);\n\n      for (var g = c; g <= d; g++) {\n        if (e == null) {\n          break;\n        }\n\n        if (g > e.ad) {\n          if (e.ae < this.de.t.count - 1) {\n            e = this.de.t._inner[e.ae + 1];\n          } else {\n            break;\n          }\n        }\n\n        if (!e.p || g >= e.af && g <= e.af + (e.v() - 1) + e.aa) {\n          continue;\n        }\n\n        var h = g - e.t;\n        var i = intDivide(h, this.actualPageSize);\n\n        if (!f.contains(i)) {\n          f.add(i);\n        }\n      }\n\n      b = f.toArray();\n    }\n\n    return b;\n  };\n\n  VirtualDataSource.prototype.getUnrealizedCount = function () {\n    var a = this.df.g * this.actualPageSize;\n    var b = this.actualCount - a;\n    return b;\n  };\n\n  VirtualDataSource.prototype.onSetItemOverride = function (a, b, c) {\n    _super.prototype.onSetItemOverride.call(this, a, b, c);\n\n    var d = this.c1(a);\n    var e = d[0];\n\n    if (this.df.d(e)) {\n      this.df.j(e);\n    }\n  };\n\n  VirtualDataSource.prototype.refreshInternalOverride = function () {\n    _super.prototype.refreshInternalOverride.call(this);\n\n    this.actualPageSizePopulated = false;\n    var a = this.actualCount != 0;\n    this.dh = true;\n\n    if (!this.di) {\n      this.resetCache();\n\n      if (a) {\n        this.onClearItems();\n      }\n\n      this.cv = null;\n      this.c0 = null;\n      this.d5 = 0;\n      this.de.v();\n    } else {\n      this.di = false;\n\n      if (a) {\n        this.onClearItems();\n      }\n    }\n\n    this.ex();\n    this.dc.au();\n    this.dh = false;\n  };\n\n  VirtualDataSource.prototype.ex = function () {\n    var e_1, _a;\n\n    if (this.actualDataProvider != null) {\n      try {\n        for (var _b = __values(fromEnum(this.dm.values)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var a = _c.value;\n\n          for (var c = 0; c < a.length; c++) {\n            var b = a[c];\n            this.actualDataProvider.addPageRequest(b, 1);\n          }\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n  };\n\n  VirtualDataSource.prototype.onClearItemsOverride = function () {\n    _super.prototype.onClearItemsOverride.call(this);\n\n    if (!this.dh) {\n      this.queueAutoRefresh();\n    }\n  };\n\n  VirtualDataSource.prototype.onInsertItemOverride = function (a, b) {\n    _super.prototype.onInsertItemOverride.call(this, a, b);\n\n    this.queueAutoRefresh();\n  };\n\n  VirtualDataSource.prototype.onRemoveItemOverride = function (a, b) {\n    _super.prototype.onRemoveItemOverride.call(this, a, b);\n\n    this.queueAutoRefresh();\n  };\n\n  VirtualDataSource.prototype.get_isItemIndexLookupSupported = function () {\n    return true;\n  };\n\n  VirtualDataSource.prototype.get_isKeyIndexLookupSupported = function () {\n    return true;\n  };\n\n  VirtualDataSource.prototype.indexOfItem = function (a) {\n    var b = this.df.b;\n    var c = b.o;\n    var d = b.q;\n    var e = d.count;\n    var f = b.p;\n\n    for (var g = 0; g < e; g++) {\n      if (f._inner[g]) {\n        continue;\n      }\n\n      var h = d._inner[g].b;\n      var i = h.count();\n\n      for (var j = 0; j < i; j++) {\n        if (this.dk(h.getItemAtIndex(j), a)) {\n          var k = typeGetValue(c._inner[g]);\n          var l = k * this.actualPageSize;\n          return l + j;\n        }\n      }\n    }\n\n    if (this.actualDataProvider != null && this.actualDataProvider.isItemIndexLookupSupported) {\n      return this.actualDataProvider.indexOfItem(a);\n    }\n\n    return -1;\n  };\n\n  VirtualDataSource.prototype.dk = function (a, b) {\n    if (a == null && b == null) {\n      return true;\n    }\n\n    if (a == null || b == null) {\n      return false;\n    }\n\n    return Base.equalsStatic(a, b);\n  };\n\n  VirtualDataSource.prototype.indexOfKey = function (a) {\n    var b = this.actualPrimaryKey;\n\n    if (b == null || b.length < 1 || this.actualBaseDataProvider == null) {\n      return -1;\n    }\n\n    this.ensureComparables(this.actualSchema);\n    var c = this.db();\n\n    if (this.ap && this.shouldEmitSectionHeaders && !this.isSectionContentVisible && this.isSectionHeaderNormalRow) {\n      if (this.de.t.count > 0) {\n        for (var d = 0; d < this.de.t.count; d++) {\n          var e = this.de.t._inner[d];\n          var f = new DataSourceSpecialRow();\n\n          for (var g = 0; g < e.e.length; g++) {\n            var h = e.e[g];\n            var i = e.f[g];\n            f.setSectionValue(h, i);\n          }\n\n          if (c.i(f, a) == 0) {\n            return d;\n          }\n        }\n      }\n    }\n\n    var j = this.df.b;\n    var k = j.o;\n    var l = j.q;\n    var m = l.count;\n    var n = j.p;\n\n    for (var o = 0; o < m; o++) {\n      if (n._inner[o]) {\n        continue;\n      }\n\n      var p = l._inner[o].b;\n      var q = p.count();\n\n      for (var r = 0; r < q; r++) {\n        if (c.i(p.getItemAtIndex(r), a) == 0) {\n          var s = typeGetValue(k._inner[o]);\n          var t = s * this.actualPageSize;\n          return t + r;\n        }\n      }\n    }\n\n    if (this.actualDataProvider != null && this.actualDataProvider.isKeyIndexLookupSupported) {\n      return this.actualDataProvider.indexOfKey(a);\n    }\n\n    return -1;\n  };\n\n  VirtualDataSource.prototype.db = function () {\n    var a = new Array(this.actualPrimaryKey.length);\n\n    for (var b = 0; b < a.length; b++) {\n      a[b] = 0;\n    }\n\n    return new DataSourcePropertiesComparer(this.actualPrimaryKey, a, this.cz, this);\n  };\n\n  VirtualDataSource.prototype.getStickyRowPriority = function (a) {\n    var b = this.getRowType(a);\n\n    switch (b) {\n      case 1:\n        return 100 - this.getRowLevel(a);\n\n      case 2:\n        return 99 - this.getRowLevel(a);\n\n      case 3:\n      case 5:\n        return 2;\n\n      case 4:\n        return 3;\n    }\n\n    return 1;\n  };\n\n  VirtualDataSource.prototype.unpinRow = function (a) {\n    _super.prototype.unpinRow.call(this, a);\n  };\n\n  VirtualDataSource.prototype.pinRow = function (a) {\n    _super.prototype.pinRow.call(this, a);\n  };\n\n  VirtualDataSource.prototype.isRowPinned = function (a) {\n    return _super.prototype.isRowPinned.call(this, a);\n  };\n\n  VirtualDataSource.prototype.getStickyRowsInRange = function (a, b) {\n    if ((this.groupDescriptions == null || this.groupDescriptions.k.count == 0) && (this.summaryDescriptions == null || this.summaryDescriptions.k.count == 0)) {\n      return null;\n    }\n\n    var c = this.dd(a);\n    var d = this.dd(b);\n\n    if (this.de.t.count > 0) {\n      if (this.de.t.count == 1) {\n        c = this.de.t._inner[0];\n        d = this.de.t._inner[0];\n      } else {\n        c = this.de.e(a);\n\n        if (c != null) {\n          while (c.z != -1) {\n            c = this.de.t._inner[c.z];\n          }\n        }\n\n        d = this.de.e(b);\n\n        if (b >= this.actualCount - this.getRootSummaryRowCount()) {\n          d = this.de.d();\n        }\n      }\n    } else if (this.getRootSummaryRowCount() > 0) {\n      var e = new List$1(Number_$type, 0);\n\n      for (var f = this.actualCount - this.getRootSummaryRowCount(); f < this.actualCount; f++) {\n        e.add(f);\n      }\n\n      return e.toArray();\n    }\n\n    if (c == null || d == null) {\n      return null;\n    }\n\n    if (c.ae == this.dx && c.aa == this.dz && c.af == this.d0 && c.ad == this.dy && c.ah == this.d2 && c.ag == this.d1 && d.ae == this.dq && d.aa == this.ds && d.af == this.dt && d.ad == this.dr && d.ah == this.dv && d.ag == this.du && this.getRootSummaryRowCount() == this.dw) {\n      return this.cw;\n    }\n\n    this.dx = c.ae;\n    this.dq = d.ae;\n    this.dz = c.aa;\n    this.ds = d.aa;\n    this.d0 = c.af;\n    this.dt = d.af;\n    this.dy = c.ad;\n    this.dr = d.ad;\n    this.dv = d.ah;\n    this.du = d.ag;\n    this.d2 = c.ah;\n    this.d1 = c.ag;\n    this.dw = this.getRootSummaryRowCount();\n    var g = new List$1(Number_$type, 0);\n\n    for (var h = c.ae; h <= d.ae; h++) {\n      var i = this.de.t._inner[h];\n      var j = i.c.length;\n      var k = i.v();\n\n      if (this.shouldEmitSectionHeaders && this.ap) {\n        for (var l = 0; l < i.c.length; l++) {\n          if (i.a[l] != null) {\n            var m = i.af + i.b[l];\n            g.add(m);\n          }\n\n          if (!i.c[l]) {\n            break;\n          }\n        }\n      }\n\n      if (i.p) {\n        for (var n = 0; n < i.ah; n++) {\n          g.add(i.af + n + k);\n        }\n\n        if (this.shouldEmitShiftedRows) {\n          for (var o = 0; o < i.aa; o++) {\n            g.add(i.af + o + j);\n          }\n        }\n\n        if (this.summaryScope == 0 || this.summaryScope == 2) {\n          if (this.includeSummaryRowsInSection && this.isSectionSummaryRowsAtBottom) {\n            for (var p = i.ag - 1; p >= 0; p--) {\n              if (this.shouldEmitSectionFooters) {\n                g.add(i.ad - k - p);\n              } else {\n                g.add(i.ad - p);\n              }\n            }\n          }\n        }\n      }\n\n      if (this.shouldEmitSectionFooters && this.ap) {\n        for (var q = i.c.length - 1; q >= 0; q--) {\n          if (!i.c[q]) {\n            break;\n          }\n\n          g.add(i.ad - q);\n        }\n      }\n    }\n\n    for (var r = this.actualCount - this.getRootSummaryRowCount(); r < this.actualCount; r++) {\n      g.add(r);\n    }\n\n    this.cw = g.toArray();\n    return this.cw;\n  };\n\n  VirtualDataSource.prototype.isExclusivelySticky = function (a) {\n    var b = this.getRowType(a);\n    return b == 1 || b == 2 || b == 4 || this.isSectionSummaryRowsAtBottom && b == 5;\n  };\n\n  VirtualDataSource.prototype.getRowType = function (a) {\n    if (a < 0) {\n      return 0;\n    }\n\n    var b = this.getItemAtIndex(a);\n    var item_ = b;\n\n    if (item_ != null && item_.$$isSpecialRow !== undefined) {\n      var c = b.rowType;\n\n      if (this.isSectionHeaderNormalRow && c == 1) {\n        return 0;\n      }\n\n      return c;\n    }\n\n    return 0;\n  };\n\n  VirtualDataSource.prototype.getIsRowExpandedAtIndex = function (a) {\n    var b = this.de.e(a);\n\n    if (b == null) {\n      b = this.de.d();\n    }\n\n    for (var c = 0; c < b.a.length; c++) {\n      if (b.a[c] != null) {\n        if (a == b.af + b.b[c]) {\n          return b.c[c];\n        }\n      }\n    }\n\n    return _super.prototype.getIsRowExpandedAtIndex.call(this, a);\n  };\n\n  VirtualDataSource.prototype.setIsRowExpandedAtIndex = function (a, b) {\n    var c = this.de.e(a);\n\n    if (c == null) {\n      c = this.de.d();\n    }\n\n    for (var d = 0; d < c.a.length; d++) {\n      if (c.a[d] != null) {\n        if (a == c.af + c.b[d]) {\n          var e = false;\n          var f = c.a[d];\n\n          if (this.dl.containsKey(f) && this.dl.item(f) != b) {\n            var g = this.dl.item(f);\n\n            if (b == this.isSectionExpandedDefault) {\n              this.dl.removeItem(f);\n            } else {\n              this.dl.item(f, b);\n            }\n\n            e = true;\n            this.onRowExpansionChanged(a, g, b);\n          } else if (b != this.isSectionExpandedDefault) {\n            this.dl.addItem(f, b);\n            e = true;\n            this.onRowExpansionChanged(a, this.isSectionExpandedDefault, b);\n          }\n\n          if (e) {\n            this.de.v();\n            this.ev();\n            this.di = true;\n\n            if (this.actualCount != this.de.u) {\n              this.actualCount = this.de.u + this.getRootSummaryRowCount();\n            } else {\n              this.queueAutoRefresh();\n            }\n          }\n\n          break;\n        }\n      }\n    }\n  };\n\n  VirtualDataSource.prototype.getRowLevel = function (a) {\n    if (a < 0) {\n      return 0;\n    }\n\n    var b = this.getItemAtIndex(a);\n    var item_ = b;\n\n    if (item_ != null && item_.$$isSpecialRow !== undefined) {\n      return b.level;\n    }\n\n    if (this.isGroupingSupported) {\n      if (this.sectionHeaderDisplayMode == 1) {\n        return this.groupDescriptions.k.count;\n      } else if (this.groupDescriptions.k.count > 0) {\n        return 1;\n      }\n    }\n\n    return 0;\n  };\n\n  VirtualDataSource.prototype.getRootSummaryRowCount = function () {\n    return this.shouldEmitSummaryRows ? this.d5 : 0;\n  };\n\n  VirtualDataSource.prototype.eh = function (a) {\n    var b = \"\";\n\n    for (var c = 0; c < a.e.length; c++) {\n      b += a.e[c] + \":\" + a.f[c];\n    }\n\n    return b;\n  };\n\n  VirtualDataSource.prototype.ei = function (a, b) {\n    if (this.sectionHeaderDisplayMode == 0) {\n      return this.eh(a);\n    }\n\n    var c = \"\";\n\n    for (var d = 0; d < a.e.length; d++) {\n      c += a.e[d] + \":\" + a.f[d] + \":\";\n    }\n\n    c += b;\n    return c;\n  };\n\n  VirtualDataSource.prototype.getRootSummaryResults = function () {\n    return this.c0;\n  };\n\n  VirtualDataSource.prototype.getSectionSummaryResults = function (a) {\n    if (this.de.t.count > 0 && a >= 0 && a < this.de.t.count) {\n      return this.de.t._inner[a].i;\n    }\n\n    return null;\n  };\n\n  VirtualDataSource.prototype.clone = function () {\n    return null;\n  };\n\n  VirtualDataSource.prototype.cloneProperties = function (a) {\n    _super.prototype.cloneProperties.call(this, a);\n\n    var b = typeCast(VirtualDataSource.$, a);\n\n    if (b != null) {\n      b.pageSizeRequested = this.pageSizeRequested;\n      b.maxCachedPages = this.maxCachedPages;\n    }\n  };\n\n  Object.defineProperty(VirtualDataSource.prototype, \"concurrencyTag\", {\n    get: function get() {\n      return this._concurrencyTag;\n    },\n    set: function set(a) {\n      this._concurrencyTag = a;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  VirtualDataSource.prototype.get_isBatchingEnabled = function () {\n    return true;\n  };\n\n  VirtualDataSource.prototype.set_isBatchingEnabled = function (a) {\n    _super.prototype.set_isBatchingEnabled.call(this, a);\n  };\n\n  VirtualDataSource.prototype.updatePropertyAtKey = function (a, b, c, d) {\n    if (d === void 0) {\n      d = false;\n    }\n\n    var e = _super.prototype.updatePropertyAtKey.call(this, a, b, c, d);\n\n    if (this.concurrencyTag != null && this.aq()) {\n      var f = this.indexOfKey(a);\n\n      if (f > -1) {\n        var g = this.getItemAtIndex(f);\n        var h = this.actualDataProvider.getItemValue(g, this.concurrencyTag);\n\n        if (h != null) {\n          var i = this.u.g(a);\n          i.version = h;\n        }\n      }\n    }\n\n    return e;\n  };\n\n  VirtualDataSource.prototype.removeItemByKey = function (a) {\n    _super.prototype.removeItemByKey.call(this, a);\n\n    if (this.concurrencyTag != null && this.aq()) {\n      var b = this.indexOfKey(a);\n\n      if (b > -1) {\n        var c = this.getItemAtIndex(b);\n        var d = this.actualDataProvider.getItemValue(c, this.concurrencyTag);\n\n        if (d != null) {\n          var e = this.u.g(a);\n          e.version = d;\n        }\n      }\n    }\n  };\n\n  VirtualDataSource.prototype.co = function (a, b) {\n    if (a == 5) {\n      var c = b;\n      var d_1 = c.a;\n      var e = new List$1(TransactionState.$, 0);\n\n      var _loop_1 = function _loop_1(f) {\n        var e_2, _a, e_3, _b;\n\n        var g = d_1[f].transactionType;\n        var h = null;\n        var i = null;\n\n        if (g == TransactionType.Delete || g == 1) {\n          var j = new Dictionary$2(String_$type, Base.$, 0);\n          var k = d_1[f].id;\n\n          for (var l = 0; l < this_1.actualPrimaryKey.length; l++) {\n            j.addItem(this_1.actualPrimaryKey[l], k[l]);\n          }\n\n          h = j;\n        }\n\n        if (g == 0) {\n          var m = new Dictionary$2(String_$type, Base.$, 0);\n          var n = d_1[f].id[0];\n\n          for (var o = 0; o < this_1.actualSchema.propertyNames.length; o++) {\n            var p = this_1.actualSchema.propertyNames[o];\n            m.addItem(p, this_1.actualDataProvider.getItemValue(n, p));\n          }\n\n          i = m;\n        } else if (g == 1) {\n          i = d_1[f].value;\n        }\n\n        if (h != null) {\n          var q = {};\n          var r = h;\n\n          try {\n            for (var _c = (e_2 = void 0, __values(fromEnum(r))), _d = _c.next(); !_d.done; _d = _c.next()) {\n              var s = _d.value;\n              q[s.key] = s.value;\n            }\n          } catch (e_2_1) {\n            e_2 = {\n              error: e_2_1\n            };\n          } finally {\n            try {\n              if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n            } finally {\n              if (e_2) throw e_2.error;\n            }\n          }\n\n          h = q;\n        }\n\n        if (i != null) {\n          var t = {};\n          var u = i;\n\n          try {\n            for (var _e = (e_3 = void 0, __values(fromEnum(u))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var v = _f.value;\n              t[v.key] = v.value;\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n\n          i = t;\n        }\n\n        e.add(function () {\n          var $ret = new TransactionState(h, g, i);\n          $ret.version = d_1[f].version;\n          return $ret;\n        }());\n      };\n\n      var this_1 = this;\n\n      for (var f = 0; f < d_1.length; f++) {\n        _loop_1(f);\n      }\n\n      var w = e.toArray();\n\n      if (this.batchStarted != null) {\n        this.batchStarted(this, new DataSourceBatchStartedEventArgs(w));\n      }\n\n      this.actualDataProvider.createBatchRequest(w);\n    }\n  };\n\n  VirtualDataSource.prototype.ep = function (a, b, c) {\n    if (b) {\n      this.queueAutoRefresh();\n    }\n\n    if (this.batchCompleted != null) {\n      this.batchCompleted(this, new DataSourceBatchCompletedEventArgs(a, c));\n    }\n  };\n\n  VirtualDataSource.$t = markType(VirtualDataSource, 'VirtualDataSource', BaseDataSource.$, [IPageCandidatesSink_$type]);\n  return VirtualDataSource;\n}(BaseDataSource);\n\nexport { VirtualDataSource };","map":{"version":3,"names":["__extends","__values","BaseDataSource","IPageCandidatesSink_$type","PagePredictionEngine","LRUCache$2","Base","runOn","Array_$type","Number_$type","typeCast","fromEnum","typeGetValue","String_$type","Boolean_$type","markType","IDataSourcePage_$type","Dictionary$2","SectionMap","DataSourceExecutionContext","SectionData","List$1","DataSourceSpecialRow","DataSourcePropertiesComparer","TransactionState","TransactionType","DataSourceBatchStartedEventArgs","DataSourceBatchCompletedEventArgs","truncate","intDivide","VirtualDataSource","_super","_this","call","cz","di","d5","dc","c3","c2","d4","d3","actualPageSizePopulated","dp","dg","c7","cx","cy","df","$","dm","dn","dh","cv","c0","de","cw","dx","dq","dz","ds","d0","dt","dy","dr","d2","d1","dv","du","dw","dl","_concurrencyTag","batchStarted","batchCompleted","e","ag","actualPageSize","f","executionContext","b","isReadOnly","prototype","get_isSectionCollapsable","isSectionContentVisible","set_isSectionCollapsable","a","get_isSectionExpandedDefault","isSectionCollapsable","set_isSectionExpandedDefault","get_actualBaseDataProvider","actualDataProvider","Object","defineProperty","get","enumerable","configurable","set","onPropertyUpdated","resolveDataProvider","resetCache","c8","resetCacheOverride","i","get_isSortingSupported","externalDataSource","isSortingSupportedOverride","get_isFilteringSupported","isFilteringSupportedOverride","get_isGroupingSupported","isGroupingSupportedOverride","propertyUpdatedOverride","c","dataProvider","queueAutoRefresh","pageSizeRequested","pageLoaded","eq","ep","aa","firstVisibleIndexRequested","ae","lastVisibleIndexRequested","q","ab","actualCount","h","maxCachedPages","d9","ap","dd","d","t","execute","ew","resolveFullCount","pageIndex","er","item","schema","actualSchema","getSummaryInformation","summaryDescriptions","k","count","g","length","summaryIndex","d7","r","getGroupInformation","groupDescriptions","ev","eu","propertyName","operand","u","getRootSummaryRowCount","shouldEmitSectionHeaders","shouldEmitSectionFooters","endIndex","startIndex","af","Array","ad","groupKeyProperties","groupKeyValues","ai","sectionHeaderDisplayMode","isSectionExpandedDefault","eo","j","summaryScope","summaryResults","l","groupKey","includeSummaryRowsInSection","shouldEmitSummaryRows","isSectionSummaryRowsAtBottom","ah","m","z","n","_inner","o","equalsStatic","p","ei","containsKey","s","y","v","w","add","x","en","updateNotifier","d8","getRowType","onClearItems","rangeActualized","es","get_isVirtual","isPlaceholderItem","c1","getItemAtIndex","ed","getItemFromKey","indexOfKey","rowType","level","values","copyTo","setSectionValue","setValue","Math","floor","getItemPropertyAtIndex","ee","aq","an","a1","getItemValueAtIndex","getValue","et","addItem","removeItem","removePageRequest","addCandidate","transformPage","addPageRequest","toArray","removeCandidate","contains","getUnrealizedCount","onSetItemOverride","refreshInternalOverride","ex","au","e_1","_a","_b","_c","next","done","value","e_1_1","error","return","onClearItemsOverride","onInsertItemOverride","onRemoveItemOverride","get_isItemIndexLookupSupported","get_isKeyIndexLookupSupported","indexOfItem","dk","isItemIndexLookupSupported","actualPrimaryKey","actualBaseDataProvider","ensureComparables","db","isSectionHeaderNormalRow","isKeyIndexLookupSupported","getStickyRowPriority","getRowLevel","unpinRow","pinRow","isRowPinned","getStickyRowsInRange","shouldEmitShiftedRows","isExclusivelySticky","item_","$$isSpecialRow","undefined","getIsRowExpandedAtIndex","setIsRowExpandedAtIndex","onRowExpansionChanged","isGroupingSupported","eh","getRootSummaryResults","getSectionSummaryResults","clone","cloneProperties","get_isBatchingEnabled","set_isBatchingEnabled","updatePropertyAtKey","concurrencyTag","getItemValue","version","removeItemByKey","co","d_1","_loop_1","e_2","e_3","transactionType","Delete","id","this_1","propertyNames","_d","key","e_2_1","_e","_f","e_3_1","$ret","createBatchRequest","$t"],"sources":["C:/Users/lakki/Downloads/code/node_modules/igniteui-react-core/esm5/lib/VirtualDataSource.js"],"sourcesContent":["/*\nTHIS INFRAGISTICS ULTIMATE SOFTWARE LICENSE  AGREEMENT (\"AGREEMENT\") LOCATED HERE:\nhttps://www.infragistics.com/legal/license/igultimate-la\nhttps://www.infragistics.com/legal/license/igultimate-eula\nGOVERNS THE LICENSING, INSTALLATION AND USE OF INFRAGISTICS SOFTWARE. BY DOWNLOADING AND/OR INSTALLING AND USING INFRAGISTICS SOFTWARE:  you are indicating that you have read and understand this Agreement, and agree to be legally bound by it on behalf of the yourself and your company.\n*/\nimport { __extends, __values } from \"tslib\";\nimport { BaseDataSource } from \"./BaseDataSource\";\nimport { IPageCandidatesSink_$type } from \"./IPageCandidatesSink\";\nimport { PagePredictionEngine } from \"./PagePredictionEngine\";\nimport { LRUCache$2 } from \"./LRUCache$2\";\nimport { Base, runOn, Array_$type, Number_$type, typeCast, fromEnum, typeGetValue, String_$type, Boolean_$type, markType } from \"./type\";\nimport { IDataSourcePage_$type } from \"./IDataSourcePage\";\nimport { Dictionary$2 } from \"./Dictionary$2\";\nimport { SectionMap } from \"./SectionMap\";\nimport { DataSourceExecutionContext } from \"./DataSourceExecutionContext\";\nimport { SectionData } from \"./SectionData\";\nimport { List$1 } from \"./List$1\";\nimport { DataSourceSpecialRow } from \"./DataSourceSpecialRow\";\nimport { DataSourcePropertiesComparer } from \"./DataSourcePropertiesComparer\";\nimport { TransactionState } from \"./TransactionState\";\nimport { TransactionType } from \"./TransactionType\";\nimport { DataSourceBatchStartedEventArgs } from \"./DataSourceBatchStartedEventArgs\";\nimport { DataSourceBatchCompletedEventArgs } from \"./DataSourceBatchCompletedEventArgs\";\nimport { truncate, intDivide } from \"./number\";\n/**\n * @hidden\n */\nvar VirtualDataSource = /** @class */ /*@__PURE__*/ (function (_super) {\n    __extends(VirtualDataSource, _super);\n    function VirtualDataSource() {\n        var _this = _super.call(this) || this;\n        _this.cz = null;\n        _this.di = false;\n        _this.d5 = 0;\n        _this.dc = null;\n        _this.c3 = null;\n        _this.c2 = null;\n        _this.d4 = 50;\n        _this.d3 = 200;\n        _this.actualPageSizePopulated = false;\n        _this.dp = 50;\n        _this.dg = false;\n        _this.c7 = null;\n        _this.cx = null;\n        _this.cy = null;\n        _this.df = new LRUCache$2(Base.$, IDataSourcePage_$type, 0, 200);\n        _this.dm = new Dictionary$2(Base.$, Array_$type, 0);\n        _this.dn = new Dictionary$2(Number_$type, Number_$type, 0);\n        _this.dh = false;\n        _this.cv = null;\n        _this.c0 = null;\n        _this.de = new SectionMap();\n        _this.cw = null;\n        _this.dx = -1;\n        _this.dq = -1;\n        _this.dz = -1;\n        _this.ds = -1;\n        _this.d0 = -1;\n        _this.dt = -1;\n        _this.dy = -1;\n        _this.dr = -1;\n        _this.d2 = -1;\n        _this.d1 = -1;\n        _this.dv = -1;\n        _this.du = -1;\n        _this.dw = -1;\n        _this.dl = new Dictionary$2(String_$type, Boolean_$type, 0);\n        _this._concurrencyTag = null;\n        _this.batchStarted = null;\n        _this.batchCompleted = null;\n        _this.dc = new PagePredictionEngine();\n        _this.dc.e = _this;\n        _this.dc.ag = _this.actualPageSize;\n        _this.dc.f = _this.de;\n        _this.executionContext = new DataSourceExecutionContext();\n        _this.dc.b = _this.executionContext;\n        _this.isReadOnly = true;\n        return _this;\n    }\n    VirtualDataSource.prototype.get_isSectionCollapsable = function () {\n        if (!this.isSectionContentVisible) {\n            return true;\n        }\n        return _super.prototype.get_isSectionCollapsable.call(this);\n    };\n    VirtualDataSource.prototype.set_isSectionCollapsable = function (a) {\n        _super.prototype.set_isSectionCollapsable.call(this, a);\n    };\n    VirtualDataSource.prototype.get_isSectionExpandedDefault = function () {\n        if (!this.isSectionContentVisible) {\n            return false;\n        }\n        if (this.isSectionCollapsable) {\n            return _super.prototype.get_isSectionExpandedDefault.call(this);\n        }\n        return true;\n    };\n    VirtualDataSource.prototype.set_isSectionExpandedDefault = function (a) {\n        _super.prototype.set_isSectionExpandedDefault.call(this, a);\n    };\n    VirtualDataSource.prototype.get_actualBaseDataProvider = function () {\n        return this.actualDataProvider;\n    };\n    Object.defineProperty(VirtualDataSource.prototype, \"actualBaseDataProvider\", {\n        get: function () {\n            return this.get_actualBaseDataProvider();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(VirtualDataSource.prototype, \"dataProvider\", {\n        get: function () {\n            return this.c3;\n        },\n        set: function (a) {\n            var b = this.c3;\n            this.c3 = a;\n            if (b != this.c3) {\n                this.onPropertyUpdated(\"DataProvider\", b, this.c3);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(VirtualDataSource.prototype, \"actualDataProvider\", {\n        get: function () {\n            if (this.c2 == null) {\n                this.actualDataProvider = this.resolveDataProvider();\n            }\n            return this.c2;\n        },\n        set: function (a) {\n            var b = this.c2;\n            this.c2 = a;\n            if (b != this.c2) {\n                this.onPropertyUpdated(\"ActualDataProvider\", b, this.c2);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(VirtualDataSource.prototype, \"pageSizeRequested\", {\n        get: function () {\n            return this.d4;\n        },\n        set: function (a) {\n            var b = this.d4;\n            this.d4 = a;\n            if (b != this.d4) {\n                this.onPropertyUpdated(\"PageSizeRequested\", b, this.d4);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    VirtualDataSource.prototype.resetCache = function () {\n        if (this.c8 != null) {\n            this.c8.resetCache();\n        }\n        this.resetCacheOverride();\n    };\n    VirtualDataSource.prototype.resetCacheOverride = function () {\n        this.df.i();\n    };\n    Object.defineProperty(VirtualDataSource.prototype, \"maxCachedPages\", {\n        get: function () {\n            return this.d3;\n        },\n        set: function (a) {\n            var b = this.d3;\n            this.d3 = a;\n            if (b != this.d3) {\n                this.onPropertyUpdated(\"MaxCachedPages\", b, this.d3);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(VirtualDataSource.prototype, \"actualPageSize\", {\n        get: function () {\n            return this.dp;\n        },\n        set: function (a) {\n            var b = this.dp;\n            this.dp = a;\n            if (b != this.dp) {\n                this.onPropertyUpdated(\"ActualPageSize\", b, this.dp);\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    VirtualDataSource.prototype.get_isSortingSupported = function () {\n        if (this.externalDataSource != null && !this.dg) {\n            this.dg = true;\n            var a = this.externalDataSource.isSortingSupportedOverride;\n            this.dg = false;\n            return a;\n        }\n        return false;\n    };\n    VirtualDataSource.prototype.get_isFilteringSupported = function () {\n        if (this.externalDataSource != null && !this.dg) {\n            this.dg = true;\n            var a = this.externalDataSource.isFilteringSupportedOverride;\n            this.dg = false;\n            return a;\n        }\n        return false;\n    };\n    VirtualDataSource.prototype.get_isGroupingSupported = function () {\n        if (this.externalDataSource != null && !this.dg) {\n            this.dg = true;\n            var a = this.externalDataSource.isGroupingSupportedOverride;\n            this.dg = false;\n            return a;\n        }\n        return false;\n    };\n    Object.defineProperty(VirtualDataSource.prototype, \"c8\", {\n        get: function () {\n            return this.c7;\n        },\n        set: function (a) {\n            this.c7 = a;\n            this.actualDataProvider = this.resolveDataProvider();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    VirtualDataSource.prototype.resolveDataProvider = function () {\n        if (this.c8 == null) {\n            return null;\n        }\n        return this.c8.resolveDataProvider();\n    };\n    VirtualDataSource.prototype.propertyUpdatedOverride = function (a, b, c) {\n        _super.prototype.propertyUpdatedOverride.call(this, a, b, c);\n        switch (a) {\n            case \"DataProvider\":\n                this.actualDataProvider = this.dataProvider;\n                this.queueAutoRefresh();\n                break;\n            case \"ExecutionContext\":\n                this.dc.b = this.executionContext;\n                break;\n            case \"ActualDataProvider\":\n                this.actualDataProvider.pageSizeRequested = this.pageSizeRequested;\n                this.actualDataProvider.pageLoaded = runOn(this, this.eq);\n                this.actualDataProvider.batchCompleted = runOn(this, this.ep);\n                this.queueAutoRefresh();\n                break;\n            case \"PageSizeRequested\":\n                this.actualPageSize = this.pageSizeRequested;\n                if (this.actualDataProvider != null) {\n                    this.actualDataProvider.pageSizeRequested = this.pageSizeRequested;\n                }\n                this.queueAutoRefresh();\n                break;\n            case \"ActualPageSize\":\n                this.dc.ag = this.actualPageSize;\n                this.queueAutoRefresh();\n                break;\n            case \"FirstVisibleIndexRequested\":\n                this.dc.aa = this.firstVisibleIndexRequested;\n                break;\n            case \"LastVisibleIndexRequested\":\n                this.dc.ae = this.lastVisibleIndexRequested;\n                break;\n            case \"ActualCount\":\n                if (this.actualDataProvider != null && !this.de.q) {\n                    this.dc.ab = this.actualDataProvider.actualCount;\n                }\n                else {\n                    this.dc.ab = this.actualCount;\n                }\n                this.queueAutoRefresh();\n                break;\n            case \"MaxCachedPages\":\n                this.df.h = this.maxCachedPages;\n                break;\n        }\n    };\n    VirtualDataSource.prototype.d9 = function (a) {\n        if (this.ap && this.de.q) {\n            var b = this.dd(a);\n            if (b == null) {\n                b = this.de.d();\n            }\n            return a - b.t;\n        }\n        return a;\n    };\n    VirtualDataSource.prototype.eq = function (a, b, c) {\n        var _this = this;\n        var d = this.executionContext;\n        if (d != null) {\n            d.execute(function () { return _this.ew(a, b, c); });\n        }\n        else {\n            this.ew(a, b, c);\n        }\n    };\n    VirtualDataSource.prototype.ew = function (a, b, c) {\n        if (a == null) {\n            b = this.resolveFullCount(b);\n            if (this.actualCount != b) {\n                this.actualCount = b;\n            }\n            return;\n        }\n        if (c != this.actualPageSize && !this.actualPageSizePopulated) {\n            this.actualPageSize = c;\n        }\n        this.actualPageSizePopulated = true;\n        var d = a.pageIndex();\n        this.er(d);\n        this.df.item(d, a);\n        var e = a.schema();\n        if (e != null) {\n            this.actualSchema = e;\n        }\n        var f = a.getSummaryInformation();\n        if (this.summaryDescriptions.k.count > 0 && this.c0 == null && f != null) {\n            this.c0 = f;\n            for (var g = 0; g < this.c0.length; g++) {\n                this.c0[g].summaryIndex = this.d7(this.c0[g]);\n            }\n            var h = SectionData.r(this.c0);\n            this.d5 = h.count;\n        }\n        var i = a.getGroupInformation();\n        if (this.groupDescriptions.k.count > 0 && this.cv == null && i != null) {\n            this.cv = i;\n            this.ev();\n            this.di = false;\n        }\n        b = this.resolveFullCount(b);\n        if (this.actualCount != b) {\n            this.actualCount = b;\n        }\n        this.eu(a);\n    };\n    VirtualDataSource.prototype.d7 = function (a) {\n        for (var b = 0; b < this.summaryDescriptions.k.count; b++) {\n            var c = this.summaryDescriptions.k.item(b);\n            if (c.propertyName == a.propertyName && c.operand == a.operand) {\n                return b;\n            }\n        }\n        return -1;\n    };\n    VirtualDataSource.prototype.resolveFullCount = function (a) {\n        if (this.cv != null) {\n            return this.de.u + this.getRootSummaryRowCount();\n        }\n        return a + this.getRootSummaryRowCount();\n    };\n    VirtualDataSource.prototype.ev = function () {\n        var a = 0;\n        var b = 0;\n        var c = this.shouldEmitSectionHeaders;\n        var d = this.shouldEmitSectionFooters;\n        for (var e = 0; e < this.cv.length; e++) {\n            var f = new SectionData();\n            var g = b;\n            var h = this.cv[e].endIndex - this.cv[e].startIndex;\n            f.af = a;\n            f.ae = e;\n            f.d = new Array(this.groupDescriptions.k.count);\n            for (var i = 0; i < this.groupDescriptions.k.count; i++) {\n                f.d[i] = 0;\n            }\n            f.ad = a + h;\n            f.t = 0;\n            f.e = this.cv[e].groupKeyProperties;\n            f.f = this.cv[e].groupKeyValues;\n            f.h = new Array(0);\n            f.ai(this.sectionHeaderDisplayMode, this.isSectionExpandedDefault);\n            this.eo(f, e == 0);\n            if (d) {\n                f.u = f.c.length;\n            }\n            var j = 0;\n            f.i = new Array(this.groupDescriptions.k.count);\n            if (this.summaryScope == 0 || this.summaryScope == 2) {\n                if (this.cv[e].summaryResults != null) {\n                    f.i[this.groupDescriptions.k.count - 1] = this.cv[e].summaryResults;\n                    if (f.i != null) {\n                        for (var k = 0; k < f.i[this.groupDescriptions.k.count - 1].length; k++) {\n                            var l = f.i[this.groupDescriptions.k.count - 1][k];\n                            l.summaryIndex = this.d7(l);\n                            l.groupKey = f.f;\n                        }\n                        j = SectionData.r(f.i[this.groupDescriptions.k.count - 1]).count;\n                    }\n                }\n            }\n            if (this.includeSummaryRowsInSection && this.shouldEmitSummaryRows) {\n                if (this.isSectionSummaryRowsAtBottom) {\n                    f.ag = j;\n                }\n                else {\n                    f.ah = j;\n                    g += j;\n                }\n                b += j;\n                f.ad += j;\n            }\n            if (d) {\n                b++;\n            }\n            if (c) {\n                var m = 0;\n                f.b = new Array(f.c.length);\n                if (f.z > -1) {\n                    var n = this.de.t._inner[f.z];\n                    for (var o = 0; o < n.f.length; o++) {\n                        m = o;\n                        if (!Base.equalsStatic(n.f[o], f.f[o])) {\n                            break;\n                        }\n                    }\n                }\n                for (var p = m; p < f.c.length; p++) {\n                    b++;\n                    g++;\n                    f.ad++;\n                    var q = this.ei(f, p);\n                    f.a[p] = q;\n                    f.b[p] = p - m;\n                    if (this.dl.containsKey(q)) {\n                        f.c[p] = this.dl.item(q);\n                    }\n                    else {\n                        f.c[p] = this.isSectionExpandedDefault;\n                    }\n                    if (!f.c[p]) {\n                        var r = 0;\n                        var s = f.c.length - 1 - p;\n                        f.ad -= r;\n                        b -= r;\n                        if (d) {\n                            b--;\n                            f.u--;\n                        }\n                        p += s;\n                    }\n                }\n            }\n            f.y = c ? f.v() : 0;\n            f.t = g;\n            this.de.z(f, h + 1);\n            if (!f.p) {\n                var t = f.w();\n                f.ad -= f.d[t] + j;\n                b -= f.d[t] + j;\n            }\n            a = f.ad + 1;\n            this.de.t.add(f);\n            f.q = this.de.r(f);\n        }\n        var u = 0;\n        for (var v = 0; v < this.de.t.count; v++) {\n            var w = this.de.t._inner[v];\n            if (this.shouldEmitSectionHeaders) {\n                if (!w.q) {\n                    var x = w.ad - w.af + 1;\n                    this.de.ae(w.ae);\n                    this.de.ab(w, -x, -x);\n                    v--;\n                    u++;\n                    continue;\n                }\n            }\n            if (w.z > -1) {\n                w.z -= u;\n            }\n        }\n    };\n    VirtualDataSource.prototype.eo = function (a, b) {\n        if (b) {\n            this.cx = new Array(this.groupDescriptions.k.count);\n            for (var c = 0; c < this.cx.length; c++) {\n                this.cx[c] = a;\n            }\n        }\n        if (this.sectionHeaderDisplayMode == 1) {\n            var d = false;\n            var e = a.e.length;\n            for (var f = 0; f < e; f++) {\n                if (d) {\n                    this.cx[f] = a;\n                    continue;\n                }\n                var g = false;\n                if (this.cx[f].f[f] == null) {\n                    g = a.f[f] != null;\n                }\n                else {\n                    g = !Base.equalsStatic(this.cx[f].f[f], a.f[f]);\n                }\n                if (g) {\n                    this.cx[f] = a;\n                    if (f - 1 > -1) {\n                        var h = f - 1;\n                        while (h >= 0 && this.cx[h].o) {\n                            h = h - 1;\n                        }\n                        a.z = this.cx[h].ae;\n                    }\n                    d = true;\n                }\n            }\n        }\n        else {\n            var i = false;\n            for (var j = 0; j < a.e.length; j++) {\n                if (this.cx[0].f[j] == null) {\n                    if (this.cx[0].f[j] != a.f[j]) {\n                        i = true;\n                        break;\n                    }\n                    continue;\n                }\n                if (!Base.equalsStatic(this.cx[0].f[j], a.f[j])) {\n                    i = true;\n                    break;\n                }\n            }\n            if (i) {\n                this.cx[0] = a;\n            }\n        }\n    };\n    VirtualDataSource.prototype.en = function (a) {\n    };\n    VirtualDataSource.prototype.eu = function (a) {\n        if (this.updateNotifier != null) {\n            var b = a.pageIndex() * this.actualPageSize;\n            if (this.actualDataProvider != null) {\n                if (b > this.actualDataProvider.actualCount) {\n                    return;\n                }\n            }\n            var c = this.d8(b);\n            var d = this.d8(b + a.count() - 1);\n            if (c > 0 && this.getRowType(c - 1) == 1) {\n                c--;\n            }\n            if (this.actualCount == 0 && a.count() == 0) {\n                this.onClearItems();\n            }\n            else {\n                this.updateNotifier.rangeActualized(c, d);\n            }\n        }\n    };\n    VirtualDataSource.prototype.d8 = function (a) {\n        if (this.ap && this.de.q) {\n            var b = this.de.g(a);\n            if (b == null) {\n                b = this.de.d();\n            }\n            if (!b.p) {\n                return b.af;\n            }\n            return a + b.t;\n        }\n        return a;\n    };\n    VirtualDataSource.prototype.es = function (a) {\n        a();\n    };\n    VirtualDataSource.prototype.get_isVirtual = function () {\n        return true;\n    };\n    VirtualDataSource.prototype.isPlaceholderItem = function (a) {\n        var b = this.c1(a);\n        var c = b[0];\n        if (!this.df.d(c)) {\n            if (b[1] == -1) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    };\n    VirtualDataSource.prototype.getItemAtIndex = function (a) {\n        if (a >= this.actualCount - this.getRootSummaryRowCount()) {\n            return this.ed(a);\n        }\n        var b = this.c1(a);\n        var c = b[0];\n        if (!this.df.d(c)) {\n            if (b[1] == -1) {\n                return this.ed(a);\n            }\n            return null;\n        }\n        var d = this.df.item(c);\n        var e = b[1];\n        if (e == -1) {\n            return this.ed(a);\n        }\n        return d.getItemAtIndex(e);\n    };\n    VirtualDataSource.prototype.getItemFromKey = function (a) {\n        var b = this.indexOfKey(a);\n        if (b >= 0) {\n            return this.getItemAtIndex(b);\n        }\n        return null;\n    };\n    VirtualDataSource.prototype.ed = function (a) {\n        if (a >= this.actualCount - this.getRootSummaryRowCount()) {\n            var b = new DataSourceSpecialRow();\n            b.rowType = 4;\n            b.level = 0;\n            var c = a - (this.actualCount - this.getRootSummaryRowCount());\n            var d = SectionData.r(this.c0);\n            var e = new Array(d._inner[c].count);\n            d._inner[c].values.copyTo(e, 0);\n            b.summaryResults = e;\n            return b;\n        }\n        var f = this.dd(a);\n        if (f != null) {\n            var g = f.j(a);\n            if (g == 1 || g == 2) {\n                var h = new DataSourceSpecialRow();\n                h.rowType = g;\n                h.summaryResults = f.i[f.i.length - 1];\n                h.level = g == 1 ? f.w() + (a - f.af) : (f.u - 1) - (f.w() + (a - (f.ad - f.u + 1)));\n                if (this.sectionHeaderDisplayMode == 0) {\n                    for (var i = 0; i < this.groupDescriptions.k.count; i++) {\n                        h.setSectionValue(this.groupDescriptions.k.item(i).propertyName, f.f[i]);\n                        h.setValue(this.groupDescriptions.k.item(i).propertyName, f.f[i]);\n                    }\n                }\n                else {\n                    if (h.level >= 0 && h.level < this.groupDescriptions.k.count) {\n                        h.setSectionValue(this.groupDescriptions.k.item(h.level).propertyName, f.f[h.level]);\n                        h.setValue(this.groupDescriptions.k.item(h.level).propertyName, f.f[h.level]);\n                    }\n                }\n                return h;\n            }\n            else if (g == 5) {\n                var j = new DataSourceSpecialRow();\n                j.rowType = 5;\n                j.level = f.c.length;\n                var k = f.x(a);\n                var l = SectionData.r(f.i[f.i.length - 1]);\n                var m = new Array(l._inner[k].count);\n                l._inner[k].values.copyTo(m, 0);\n                j.summaryResults = m;\n                return j;\n            }\n        }\n        return null;\n    };\n    VirtualDataSource.prototype.c1 = function (a) {\n        if (this.ap && this.de.q) {\n            var b = false;\n            var c = this.dd(a);\n            if (c == null) {\n                c = this.de.d();\n                if (this.c0.length > 0 && a > c.ad) {\n                    b = true;\n                }\n            }\n            var d = c.af;\n            if (this.shouldEmitSectionHeaders && a >= d && a < d + c.v()) {\n                b = true;\n            }\n            if (a - (d + c.v() - 1) <= c.aa + c.ah) {\n                b = true;\n            }\n            if (this.shouldEmitSectionFooters) {\n                if (a <= c.ad && a >= c.ad - c.c.length - c.ag) {\n                    b = true;\n                }\n            }\n            else if (c.ag > 0) {\n                if (a > c.ad - c.ag && a <= c.ad) {\n                    b = true;\n                }\n            }\n            var e = a - c.t;\n            var f = truncate(Math.floor(e / this.actualPageSize));\n            var g = e % this.actualPageSize;\n            if (b) {\n                g = -1;\n            }\n            var h = new Array(2);\n            h[0] = f;\n            h[1] = g;\n            return h;\n        }\n        else {\n            var i = truncate(Math.floor(a / this.actualPageSize));\n            var j = a % this.actualPageSize;\n            var k = new Array(2);\n            k[0] = i;\n            k[1] = j;\n            return k;\n        }\n    };\n    VirtualDataSource.prototype.dd = function (a) {\n        return this.de.e(a);\n    };\n    VirtualDataSource.prototype.getItemPropertyAtIndex = function (a, b) {\n        if (a > (this.actualCount - 1) - this.getRootSummaryRowCount()) {\n            return this.ee(a, b);\n        }\n        var c = this.c1(a);\n        var d = c[0];\n        if (!this.df.d(d)) {\n            if (c[1] == -1) {\n                return this.ee(a, b);\n            }\n            return null;\n        }\n        var e = this.df.item(d);\n        var f = c[1];\n        if (f == -1) {\n            return this.ee(a, b);\n        }\n        if (this.aq()) {\n            var g = e.getItemAtIndex(f);\n            var h = this.an(g, b);\n            if (h) {\n                var i = this.a1(g, b);\n                return i;\n            }\n        }\n        return e.getItemValueAtIndex(f, b);\n    };\n    VirtualDataSource.prototype.ee = function (a, b) {\n        var c = this.ed(a);\n        if (typeCast(DataSourceSpecialRow.$, c) !== null) {\n            return c.getValue(b);\n        }\n        return null;\n    };\n    VirtualDataSource.prototype.et = function (a) {\n        if (!this.dn.containsKey(a)) {\n            this.dn.addItem(a, 1);\n        }\n        else {\n            this.dn.item(a, this.dn.item(a) + 1);\n        }\n    };\n    VirtualDataSource.prototype.er = function (a) {\n        if (this.dn.containsKey(a)) {\n            this.dn.item(a, this.dn.item(a) - 1);\n            if (this.dn.item(a) <= 0) {\n                this.dn.removeItem(a);\n                if (this.actualDataProvider != null) {\n                    this.actualDataProvider.removePageRequest(a);\n                }\n            }\n        }\n    };\n    VirtualDataSource.prototype.addCandidate = function (a, b) {\n        var c = false;\n        if (!this.dm.containsKey(a)) {\n            var d = new List$1(Number_$type, 0);\n            var e = this.transformPage(a);\n            for (var f = 0; f < e.length; f++) {\n                var g = e[f];\n                if (!this.df.d(g)) {\n                    d.add(g);\n                    this.et(g);\n                    var h = this.dn.item(g);\n                    if (h == 1 && this.actualDataProvider != null) {\n                        this.actualDataProvider.addPageRequest(g, b);\n                    }\n                    c = true;\n                }\n            }\n            if (d.count > 0) {\n                this.dm.addItem(a, d.toArray());\n            }\n        }\n        return c;\n    };\n    VirtualDataSource.prototype.removeCandidate = function (a) {\n        if (this.dm.containsKey(a)) {\n            for (var b = 0; b < this.dm.item(a).length; b++) {\n                var c = this.dm.item(a)[b];\n                this.er(c);\n            }\n            this.dm.removeItem(a);\n        }\n    };\n    VirtualDataSource.prototype.transformPage = function (a) {\n        var b = [a];\n        if (this.ap && this.de.q) {\n            var c = a * this.actualPageSize;\n            var d = c + this.actualPageSize - 1;\n            var e = this.dd(c);\n            var f = new List$1(Number_$type, 0);\n            for (var g = c; g <= d; g++) {\n                if (e == null) {\n                    break;\n                }\n                if (g > e.ad) {\n                    if (e.ae < this.de.t.count - 1) {\n                        e = this.de.t._inner[e.ae + 1];\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (!e.p || (g >= e.af && g <= e.af + (e.v() - 1) + e.aa)) {\n                    continue;\n                }\n                var h = g - e.t;\n                var i = intDivide(h, this.actualPageSize);\n                if (!f.contains(i)) {\n                    f.add(i);\n                }\n            }\n            b = f.toArray();\n        }\n        return b;\n    };\n    VirtualDataSource.prototype.getUnrealizedCount = function () {\n        var a = this.df.g * this.actualPageSize;\n        var b = this.actualCount - a;\n        return b;\n    };\n    VirtualDataSource.prototype.onSetItemOverride = function (a, b, c) {\n        _super.prototype.onSetItemOverride.call(this, a, b, c);\n        var d = this.c1(a);\n        var e = d[0];\n        if (this.df.d(e)) {\n            this.df.j(e);\n        }\n    };\n    VirtualDataSource.prototype.refreshInternalOverride = function () {\n        _super.prototype.refreshInternalOverride.call(this);\n        this.actualPageSizePopulated = false;\n        var a = this.actualCount != 0;\n        this.dh = true;\n        if (!this.di) {\n            this.resetCache();\n            if (a) {\n                this.onClearItems();\n            }\n            this.cv = null;\n            this.c0 = null;\n            this.d5 = 0;\n            this.de.v();\n        }\n        else {\n            this.di = false;\n            if (a) {\n                this.onClearItems();\n            }\n        }\n        this.ex();\n        this.dc.au();\n        this.dh = false;\n    };\n    VirtualDataSource.prototype.ex = function () {\n        var e_1, _a;\n        if (this.actualDataProvider != null) {\n            try {\n                for (var _b = __values(fromEnum(this.dm.values)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var a = _c.value;\n                    for (var c = 0; c < a.length; c++) {\n                        var b = a[c];\n                        this.actualDataProvider.addPageRequest(b, 1);\n                    }\n                }\n            }\n            catch (e_1_1) {\n                e_1 = { error: e_1_1 };\n            }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return))\n                        _a.call(_b);\n                }\n                finally {\n                    if (e_1)\n                        throw e_1.error;\n                }\n            }\n        }\n    };\n    VirtualDataSource.prototype.onClearItemsOverride = function () {\n        _super.prototype.onClearItemsOverride.call(this);\n        if (!this.dh) {\n            this.queueAutoRefresh();\n        }\n    };\n    VirtualDataSource.prototype.onInsertItemOverride = function (a, b) {\n        _super.prototype.onInsertItemOverride.call(this, a, b);\n        this.queueAutoRefresh();\n    };\n    VirtualDataSource.prototype.onRemoveItemOverride = function (a, b) {\n        _super.prototype.onRemoveItemOverride.call(this, a, b);\n        this.queueAutoRefresh();\n    };\n    VirtualDataSource.prototype.get_isItemIndexLookupSupported = function () {\n        return true;\n    };\n    VirtualDataSource.prototype.get_isKeyIndexLookupSupported = function () {\n        return true;\n    };\n    VirtualDataSource.prototype.indexOfItem = function (a) {\n        var b = this.df.b;\n        var c = b.o;\n        var d = b.q;\n        var e = d.count;\n        var f = b.p;\n        for (var g = 0; g < e; g++) {\n            if (f._inner[g]) {\n                continue;\n            }\n            var h = d._inner[g].b;\n            var i = h.count();\n            for (var j = 0; j < i; j++) {\n                if (this.dk(h.getItemAtIndex(j), a)) {\n                    var k = typeGetValue(c._inner[g]);\n                    var l = k * this.actualPageSize;\n                    return l + j;\n                }\n            }\n        }\n        if (this.actualDataProvider != null && this.actualDataProvider.isItemIndexLookupSupported) {\n            return this.actualDataProvider.indexOfItem(a);\n        }\n        return -1;\n    };\n    VirtualDataSource.prototype.dk = function (a, b) {\n        if (a == null && b == null) {\n            return true;\n        }\n        if (a == null || b == null) {\n            return false;\n        }\n        return Base.equalsStatic(a, b);\n    };\n    VirtualDataSource.prototype.indexOfKey = function (a) {\n        var b = this.actualPrimaryKey;\n        if (b == null || b.length < 1 || this.actualBaseDataProvider == null) {\n            return -1;\n        }\n        this.ensureComparables(this.actualSchema);\n        var c = this.db();\n        if (this.ap && this.shouldEmitSectionHeaders && !this.isSectionContentVisible && this.isSectionHeaderNormalRow) {\n            if (this.de.t.count > 0) {\n                for (var d = 0; d < this.de.t.count; d++) {\n                    var e = this.de.t._inner[d];\n                    var f = new DataSourceSpecialRow();\n                    for (var g = 0; g < e.e.length; g++) {\n                        var h = e.e[g];\n                        var i = e.f[g];\n                        f.setSectionValue(h, i);\n                    }\n                    if (c.i(f, a) == 0) {\n                        return d;\n                    }\n                }\n            }\n        }\n        var j = this.df.b;\n        var k = j.o;\n        var l = j.q;\n        var m = l.count;\n        var n = j.p;\n        for (var o = 0; o < m; o++) {\n            if (n._inner[o]) {\n                continue;\n            }\n            var p = l._inner[o].b;\n            var q = p.count();\n            for (var r = 0; r < q; r++) {\n                if (c.i(p.getItemAtIndex(r), a) == 0) {\n                    var s = typeGetValue(k._inner[o]);\n                    var t = s * this.actualPageSize;\n                    return t + r;\n                }\n            }\n        }\n        if (this.actualDataProvider != null && this.actualDataProvider.isKeyIndexLookupSupported) {\n            return this.actualDataProvider.indexOfKey(a);\n        }\n        return -1;\n    };\n    VirtualDataSource.prototype.db = function () {\n        var a = new Array(this.actualPrimaryKey.length);\n        for (var b = 0; b < a.length; b++) {\n            a[b] = 0;\n        }\n        return new DataSourcePropertiesComparer(this.actualPrimaryKey, a, this.cz, this);\n    };\n    VirtualDataSource.prototype.getStickyRowPriority = function (a) {\n        var b = this.getRowType(a);\n        switch (b) {\n            case 1: return 100 - this.getRowLevel(a);\n            case 2: return 99 - this.getRowLevel(a);\n            case 3:\n            case 5: return 2;\n            case 4: return 3;\n        }\n        return 1;\n    };\n    VirtualDataSource.prototype.unpinRow = function (a) {\n        _super.prototype.unpinRow.call(this, a);\n    };\n    VirtualDataSource.prototype.pinRow = function (a) {\n        _super.prototype.pinRow.call(this, a);\n    };\n    VirtualDataSource.prototype.isRowPinned = function (a) {\n        return _super.prototype.isRowPinned.call(this, a);\n    };\n    VirtualDataSource.prototype.getStickyRowsInRange = function (a, b) {\n        if ((this.groupDescriptions == null || this.groupDescriptions.k.count == 0) && (this.summaryDescriptions == null || this.summaryDescriptions.k.count == 0)) {\n            return null;\n        }\n        var c = this.dd(a);\n        var d = this.dd(b);\n        if (this.de.t.count > 0) {\n            if (this.de.t.count == 1) {\n                c = this.de.t._inner[0];\n                d = this.de.t._inner[0];\n            }\n            else {\n                c = this.de.e(a);\n                if (c != null) {\n                    while (c.z != -1) {\n                        c = this.de.t._inner[c.z];\n                    }\n                }\n                d = this.de.e(b);\n                if (b >= this.actualCount - this.getRootSummaryRowCount()) {\n                    d = this.de.d();\n                }\n            }\n        }\n        else if (this.getRootSummaryRowCount() > 0) {\n            var e = new List$1(Number_$type, 0);\n            for (var f = this.actualCount - this.getRootSummaryRowCount(); f < this.actualCount; f++) {\n                e.add(f);\n            }\n            return e.toArray();\n        }\n        if (c == null || d == null) {\n            return null;\n        }\n        if (c.ae == this.dx && c.aa == this.dz && c.af == this.d0 && c.ad == this.dy && c.ah == this.d2 && c.ag == this.d1 && d.ae == this.dq && d.aa == this.ds && d.af == this.dt && d.ad == this.dr && d.ah == this.dv && d.ag == this.du && this.getRootSummaryRowCount() == this.dw) {\n            return this.cw;\n        }\n        this.dx = c.ae;\n        this.dq = d.ae;\n        this.dz = c.aa;\n        this.ds = d.aa;\n        this.d0 = c.af;\n        this.dt = d.af;\n        this.dy = c.ad;\n        this.dr = d.ad;\n        this.dv = d.ah;\n        this.du = d.ag;\n        this.d2 = c.ah;\n        this.d1 = c.ag;\n        this.dw = this.getRootSummaryRowCount();\n        var g = new List$1(Number_$type, 0);\n        for (var h = c.ae; h <= d.ae; h++) {\n            var i = this.de.t._inner[h];\n            var j = i.c.length;\n            var k = i.v();\n            if (this.shouldEmitSectionHeaders && this.ap) {\n                for (var l = 0; l < i.c.length; l++) {\n                    if (i.a[l] != null) {\n                        var m = i.af + i.b[l];\n                        g.add(m);\n                    }\n                    if (!i.c[l]) {\n                        break;\n                    }\n                }\n            }\n            if (i.p) {\n                for (var n = 0; n < i.ah; n++) {\n                    g.add(i.af + n + k);\n                }\n                if (this.shouldEmitShiftedRows) {\n                    for (var o = 0; o < i.aa; o++) {\n                        g.add(i.af + o + j);\n                    }\n                }\n                if (this.summaryScope == 0 || this.summaryScope == 2) {\n                    if (this.includeSummaryRowsInSection && this.isSectionSummaryRowsAtBottom) {\n                        for (var p = i.ag - 1; p >= 0; p--) {\n                            if (this.shouldEmitSectionFooters) {\n                                g.add(i.ad - k - p);\n                            }\n                            else {\n                                g.add(i.ad - p);\n                            }\n                        }\n                    }\n                }\n            }\n            if (this.shouldEmitSectionFooters && this.ap) {\n                for (var q = i.c.length - 1; q >= 0; q--) {\n                    if (!i.c[q]) {\n                        break;\n                    }\n                    g.add(i.ad - q);\n                }\n            }\n        }\n        for (var r = this.actualCount - this.getRootSummaryRowCount(); r < this.actualCount; r++) {\n            g.add(r);\n        }\n        this.cw = g.toArray();\n        return this.cw;\n    };\n    VirtualDataSource.prototype.isExclusivelySticky = function (a) {\n        var b = this.getRowType(a);\n        return b == 1 || b == 2 || b == 4 || (this.isSectionSummaryRowsAtBottom && b == 5);\n    };\n    VirtualDataSource.prototype.getRowType = function (a) {\n        if (a < 0) {\n            return 0;\n        }\n        var b = this.getItemAtIndex(a);\n        var item_ = b;\n        if ((item_ != null && item_.$$isSpecialRow !== undefined)) {\n            var c = b.rowType;\n            if (this.isSectionHeaderNormalRow && c == 1) {\n                return 0;\n            }\n            return c;\n        }\n        return 0;\n    };\n    VirtualDataSource.prototype.getIsRowExpandedAtIndex = function (a) {\n        var b = this.de.e(a);\n        if (b == null) {\n            b = this.de.d();\n        }\n        for (var c = 0; c < b.a.length; c++) {\n            if (b.a[c] != null) {\n                if (a == b.af + b.b[c]) {\n                    return b.c[c];\n                }\n            }\n        }\n        return _super.prototype.getIsRowExpandedAtIndex.call(this, a);\n    };\n    VirtualDataSource.prototype.setIsRowExpandedAtIndex = function (a, b) {\n        var c = this.de.e(a);\n        if (c == null) {\n            c = this.de.d();\n        }\n        for (var d = 0; d < c.a.length; d++) {\n            if (c.a[d] != null) {\n                if (a == c.af + c.b[d]) {\n                    var e = false;\n                    var f = c.a[d];\n                    if (this.dl.containsKey(f) && this.dl.item(f) != b) {\n                        var g = this.dl.item(f);\n                        if (b == this.isSectionExpandedDefault) {\n                            this.dl.removeItem(f);\n                        }\n                        else {\n                            this.dl.item(f, b);\n                        }\n                        e = true;\n                        this.onRowExpansionChanged(a, g, b);\n                    }\n                    else if (b != this.isSectionExpandedDefault) {\n                        this.dl.addItem(f, b);\n                        e = true;\n                        this.onRowExpansionChanged(a, this.isSectionExpandedDefault, b);\n                    }\n                    if (e) {\n                        this.de.v();\n                        this.ev();\n                        this.di = true;\n                        if (this.actualCount != this.de.u) {\n                            this.actualCount = this.de.u + this.getRootSummaryRowCount();\n                        }\n                        else {\n                            this.queueAutoRefresh();\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n    };\n    VirtualDataSource.prototype.getRowLevel = function (a) {\n        if (a < 0) {\n            return 0;\n        }\n        var b = this.getItemAtIndex(a);\n        var item_ = b;\n        if ((item_ != null && item_.$$isSpecialRow !== undefined)) {\n            return b.level;\n        }\n        if (this.isGroupingSupported) {\n            if (this.sectionHeaderDisplayMode == 1) {\n                return this.groupDescriptions.k.count;\n            }\n            else if (this.groupDescriptions.k.count > 0) {\n                return 1;\n            }\n        }\n        return 0;\n    };\n    VirtualDataSource.prototype.getRootSummaryRowCount = function () {\n        return this.shouldEmitSummaryRows ? this.d5 : 0;\n    };\n    VirtualDataSource.prototype.eh = function (a) {\n        var b = \"\";\n        for (var c = 0; c < a.e.length; c++) {\n            b += a.e[c] + \":\" + a.f[c];\n        }\n        return b;\n    };\n    VirtualDataSource.prototype.ei = function (a, b) {\n        if (this.sectionHeaderDisplayMode == 0) {\n            return this.eh(a);\n        }\n        var c = \"\";\n        for (var d = 0; d < a.e.length; d++) {\n            c += a.e[d] + \":\" + a.f[d] + \":\";\n        }\n        c += b;\n        return c;\n    };\n    VirtualDataSource.prototype.getRootSummaryResults = function () {\n        return this.c0;\n    };\n    VirtualDataSource.prototype.getSectionSummaryResults = function (a) {\n        if (this.de.t.count > 0 && a >= 0 && a < this.de.t.count) {\n            return this.de.t._inner[a].i;\n        }\n        return null;\n    };\n    VirtualDataSource.prototype.clone = function () {\n        return null;\n    };\n    VirtualDataSource.prototype.cloneProperties = function (a) {\n        _super.prototype.cloneProperties.call(this, a);\n        var b = typeCast(VirtualDataSource.$, a);\n        if (b != null) {\n            b.pageSizeRequested = this.pageSizeRequested;\n            b.maxCachedPages = this.maxCachedPages;\n        }\n    };\n    Object.defineProperty(VirtualDataSource.prototype, \"concurrencyTag\", {\n        get: function () {\n            return this._concurrencyTag;\n        },\n        set: function (a) {\n            this._concurrencyTag = a;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    VirtualDataSource.prototype.get_isBatchingEnabled = function () {\n        return true;\n    };\n    VirtualDataSource.prototype.set_isBatchingEnabled = function (a) {\n        _super.prototype.set_isBatchingEnabled.call(this, a);\n    };\n    VirtualDataSource.prototype.updatePropertyAtKey = function (a, b, c, d) {\n        if (d === void 0) {\n            d = false;\n        }\n        var e = _super.prototype.updatePropertyAtKey.call(this, a, b, c, d);\n        if (this.concurrencyTag != null && this.aq()) {\n            var f = this.indexOfKey(a);\n            if (f > -1) {\n                var g = this.getItemAtIndex(f);\n                var h = this.actualDataProvider.getItemValue(g, this.concurrencyTag);\n                if (h != null) {\n                    var i = this.u.g(a);\n                    i.version = h;\n                }\n            }\n        }\n        return e;\n    };\n    VirtualDataSource.prototype.removeItemByKey = function (a) {\n        _super.prototype.removeItemByKey.call(this, a);\n        if (this.concurrencyTag != null && this.aq()) {\n            var b = this.indexOfKey(a);\n            if (b > -1) {\n                var c = this.getItemAtIndex(b);\n                var d = this.actualDataProvider.getItemValue(c, this.concurrencyTag);\n                if (d != null) {\n                    var e = this.u.g(a);\n                    e.version = d;\n                }\n            }\n        }\n    };\n    VirtualDataSource.prototype.co = function (a, b) {\n        if (a == 5) {\n            var c = b;\n            var d_1 = c.a;\n            var e = new List$1(TransactionState.$, 0);\n            var _loop_1 = function (f) {\n                var e_2, _a, e_3, _b;\n                var g = d_1[f].transactionType;\n                var h = null;\n                var i = null;\n                if (g == TransactionType.Delete || g == 1) {\n                    var j = new Dictionary$2(String_$type, Base.$, 0);\n                    var k = d_1[f].id;\n                    for (var l = 0; l < this_1.actualPrimaryKey.length; l++) {\n                        j.addItem(this_1.actualPrimaryKey[l], k[l]);\n                    }\n                    h = j;\n                }\n                if (g == 0) {\n                    var m = new Dictionary$2(String_$type, Base.$, 0);\n                    var n = d_1[f].id[0];\n                    for (var o = 0; o < this_1.actualSchema.propertyNames.length; o++) {\n                        var p = this_1.actualSchema.propertyNames[o];\n                        m.addItem(p, this_1.actualDataProvider.getItemValue(n, p));\n                    }\n                    i = m;\n                }\n                else if (g == 1) {\n                    i = d_1[f].value;\n                }\n                if (h != null) {\n                    var q = {};\n                    var r = h;\n                    try {\n                        for (var _c = (e_2 = void 0, __values(fromEnum(r))), _d = _c.next(); !_d.done; _d = _c.next()) {\n                            var s = _d.value;\n                            q[s.key] = s.value;\n                        }\n                    }\n                    catch (e_2_1) {\n                        e_2 = { error: e_2_1 };\n                    }\n                    finally {\n                        try {\n                            if (_d && !_d.done && (_a = _c.return))\n                                _a.call(_c);\n                        }\n                        finally {\n                            if (e_2)\n                                throw e_2.error;\n                        }\n                    }\n                    h = q;\n                }\n                if (i != null) {\n                    var t = {};\n                    var u = i;\n                    try {\n                        for (var _e = (e_3 = void 0, __values(fromEnum(u))), _f = _e.next(); !_f.done; _f = _e.next()) {\n                            var v = _f.value;\n                            t[v.key] = v.value;\n                        }\n                    }\n                    catch (e_3_1) {\n                        e_3 = { error: e_3_1 };\n                    }\n                    finally {\n                        try {\n                            if (_f && !_f.done && (_b = _e.return))\n                                _b.call(_e);\n                        }\n                        finally {\n                            if (e_3)\n                                throw e_3.error;\n                        }\n                    }\n                    i = t;\n                }\n                e.add(((function () {\n                    var $ret = new TransactionState(h, g, i);\n                    $ret.version = d_1[f].version;\n                    return $ret;\n                })()));\n            };\n            var this_1 = this;\n            for (var f = 0; f < d_1.length; f++) {\n                _loop_1(f);\n            }\n            var w = e.toArray();\n            if (this.batchStarted != null) {\n                this.batchStarted(this, new DataSourceBatchStartedEventArgs(w));\n            }\n            this.actualDataProvider.createBatchRequest(w);\n        }\n    };\n    VirtualDataSource.prototype.ep = function (a, b, c) {\n        if (b) {\n            this.queueAutoRefresh();\n        }\n        if (this.batchCompleted != null) {\n            this.batchCompleted(this, new DataSourceBatchCompletedEventArgs(a, c));\n        }\n    };\n    VirtualDataSource.$t = markType(VirtualDataSource, 'VirtualDataSource', BaseDataSource.$, [IPageCandidatesSink_$type]);\n    return VirtualDataSource;\n}(BaseDataSource));\nexport { VirtualDataSource };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}